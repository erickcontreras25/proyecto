<app-header titulo="Lista complejos" *ngIf="!atras"></app-header>

<ion-header no-border *ngIf="atras">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="goSlide1()">
        <ion-icon name="arrow-back-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>


  <ion-slides class="mainSlide" [options]="{ autoHeight: true }" #slidePrincipal>
    
    <ion-slide>
  
      <form>
        <ion-grid >
  
          <ion-row>
            <ion-col>
              <!-- <img src="/assets/img/im2.png" alt="10" width="20"> -->
            </ion-col>
          </ion-row>
        
          <ion-row class="center">
            <ion-col>
              
                <div *ngFor='let user of complejos' class="back">
  
                  <ion-row class="ion-align-items-center">
                    <ion-col class="izquierda">
                  <ion-button fill="clear"
                              (click)="obtenerComplejo(user.idComplejo)"
                              (click)="presentActionSheet()">
                    <ion-icon class="size" color="light"lot="start" name="reorder-three-outline"></ion-icon>
                  </ion-button>
                </ion-col>
                <ion-col class="derecha">
                  <h6 *ngIf="user.estado" style="color: rgb(6, 138, 6);" 
                      (click)="obtenerComplejoId(user.idComplejo)"
                      (click)="presentAlertConfirm()">&#8226;Abierto Ahora</h6>
                  <h6 *ngIf="!user.estado" style="color: green;"
                      (click)="obtenerComplejoId(user.idComplejo)"
                      (click)="presentAlertConfirm()">&#8226;Cerrado Ahora</h6>
                </ion-col>
                </ion-row>

                  <img src="{{user.foto}}" alt="200" width="500">
                  <ion-card-title style="color: black;">
                    {{user.nombre}}
                  </ion-card-title>
                  <ion-card-subtitle style="color: black;">
                    <ion-icon name="location-outline" color="danger"></ion-icon>
                    {{user.localidad}}
                  </ion-card-subtitle>

                  <ion-row>
                    <ion-col *ngIf="user.parqueo">
                      <h6 style="color: rgb(50, 50, 51);" 
                      (click)="obtenerComplejoId(user.idComplejo)"
                      (click)="parqueo()">&#8226;Con parqueo</h6>
                    </ion-col>
                    <ion-col *ngIf="!user.parqueo">
                      <h6 style="color: blue;" 
                      (click)="obtenerComplejoId(user.idComplejo)"
                      (click)="parqueo()">&#8226;Sin parqueo</h6>
                    </ion-col>
                    <ion-col *ngIf="user.seguridad">
                      <h6 style="color: blue;" 
                      (click)="obtenerComplejoId(user.idComplejo)"
                      (click)="seguridad()">&#8226;Con seguridad</h6>
                    </ion-col>
                    <ion-col *ngIf="!user.seguridad">
                      <h6 style="color: blue;" 
                      (click)="obtenerComplejoId(user.idComplejo)"
                      (click)="seguridad()">&#8226;Sin seguridad</h6>
                    </ion-col>
                  </ion-row>

                  <!-- <ion-row>
                    <ion-col>                 
                    </ion-col>
                    <ion-col>
                        <ion-label position="floating">Cambiar estado</ion-label>
                        <ion-select [(ngModel)]="complejo.estado"
                                    name="idCancha">
                            <ion-select-option value="true">Abierto</ion-select-option>
                            <ion-select-option value="false">Cerrado</ion-select-option>
                        </ion-select>
                  </ion-col>
                  </ion-row> -->
                  
                  <!-- <ion-row>
                    <ion-col size="6">
                      <ion-button type="submit"
                          color="tertiary"
                          shape="round"
                          >
                          Actualizar estado
                      </ion-button>
                    </ion-col>
                    <ion-col size="6">
                      <ion-button type="submit"
                          color="tertiary"
                          shape="round"
                          (click)="obtenerComplejo(user.idComplejo)"
                          
                          (click)="goSlideActualizar()">
                        Actualizar Info.
                      </ion-button>
                    </ion-col>
                  </ion-row> -->
                  <!-- <ion-row>
                    <ion-col size="6">
                      <ion-button type="submit"
                          color="tertiary"
                          shape="round"
                          (click)="obtenerCanchasComplejo(user.idComplejo)"
                          (click)="goSlideVerCancha()">
                        Ver cancha
                      </ion-button>
                    </ion-col>
                    <ion-col size="6">
                      <ion-button type="submit"
                          color="tertiary"
                          shape="round"
                          (click)="obtenerIdComplejo(user.idComplejo)"
                          (click)="goSlideAgregarCancha()">
                        Agregar cancha
                      </ion-button>
                    </ion-col>
                  </ion-row> -->
                  <ion-row>
                    <ion-col>
                      <ion-button type="submit"
                                  color="tertiary"
                                  expand="full"
                                  color="success"
                                  (click)="obtenerReservasxComplejo(user.idComplejo)"
                                  >
                        Ver reservaciones del complejo
                      </ion-button>
                    </ion-col>
                  </ion-row>
  
  
                </div>
            </ion-col>
          </ion-row>
  

  
        </ion-grid>
      </form>
    </ion-slide>
  
    <!-- -------------------------------------------------SLIDE 1------------------------------------------- -->
    <ion-slide>
      <ion-grid fixed>
            <form>
 
              <h1 style="color: white;">Reservas</h1>  

              <div>
                <ion-row>
                  <ion-col class="bor" size="3"><h6>Usuario</h6></ion-col>
                  <ion-col class="bor" size="3"><h6>Dia y hora</h6></ion-col>
                  <ion-col class="bor"><h6>¿Realizo el pagó?</h6></ion-col>
                  <!-- <ion-col></ion-col> -->
                </ion-row>
              </div>

              <div>
                  <ion-row *ngFor="let item of reservasComplejo">
                    <ion-col class="bor" size="3"><h6>{{item.user.nombreUsuario}}</h6></ion-col>
                    <ion-col class="bor" size="3"><h6>{{item.horaInicial | date:'dd-MMMM HH:mm'}} a {{item.horaFinal | date:'HH:mm'}}</h6></ion-col>
                    <ion-col class="bor" *ngIf="item.pago"><label>Completo <ion-icon color="success" name="checkmark-done-outline"></ion-icon></label></ion-col>
                    <ion-col class="bor" *ngIf="item.pagoParcial"><label>50% <ion-icon color="success" name="checkmark-outline"></ion-icon></label></ion-col>
                    <ion-col class="bor" *ngIf="!item.pago && !item.pagoParcial"><h6>No</h6></ion-col>
                    <ion-col class="bor" *ngIf="!item.pago && !item.pagoParcial">
                      <ion-button color="danger"
                                  class="centrado"      
                                  fill="clear"                
                                  (click)="eliminar(item.idReservacion, item.horaInicial)">
                                  <ion-icon name="trash-outline"></ion-icon>
                                  </ion-button>
                      
                    </ion-col>
                    <!-- <ion-col *ngIf="item.pago || item.pagoParcial"></ion-col> -->
                  </ion-row>            
              </div>

            
            </form>
        </ion-grid>
  
      </ion-slide>



      <!-- ---------------------------------------SLIDE ACTUALIZAR DIRECCION----------------------------------- -->
    <ion-slide>
      <ion-grid>
            <form>
 
                <ion-row class="ion-text-center">
                  <ion-col class="ion-text-center">
                    <h3>Actualiza tu dirección</h3>
                    <ion-item>
                      <ion-input type="text"
                                  class="izquierda"                         
                                 name="complejoLocalidad"
                                 [(ngModel)]="complejo.localidad"
                                 required>
                                </ion-input>
                    </ion-item>
                  </ion-col>
                </ion-row>

                <ion-row>
                  <!-- <ion-col>
                    <ion-button type="submit"
                                fill="outline"
                                color="success"
                                shape="round"
                                (click)="goSlide1()">
                                <ion-icon name="caret-back-outline"></ion-icon>
                      Regresar
                    </ion-button>
                  </ion-col> -->
                  <ion-col>
                    <ion-button type="submit"
                                fill="outline"
                                color="success"
                                shape="round"
                                (click)="modificarSinFoto()">
                                <ion-icon name="sync-outline"></ion-icon>
                        Actualizar                        
                    </ion-button>  
                  </ion-col>
                </ion-row>

            
            </form>
      </ion-grid>  
    </ion-slide>


    <!-- --------------------------------------SLIDE ACTUALIZAR UBICACION------------------------------------ -->
    <ion-slide>
      <ion-grid fixed>
            <form>
 
              <ion-row>
                <ion-col>  
                    <h4>Obten tu ubicacion para salir en el mapa</h4>                    

                  <ion-item class="ion-text-center">
                    <ion-spinner name="lines-small"
                                 *ngIf="cargando"></ion-spinner>
                    <ion-button (click)="localizacion()" class="centrado">Obtener mi ubicacion actual</ion-button>
                    <ion-label *ngIf="listo">
                      <ion-icon class="size" color="success" name="checkmark-done-outline"></ion-icon>
                    </ion-label>
                  </ion-item>                    
                </ion-col>
            </ion-row>

            <ion-row>
              <!-- <ion-col>
                <ion-button type="submit"
                            fill="outline"
                            color="success"
                            shape="round"
                            (click)="goSlide1()">
                    <ion-icon name="caret-back-outline"></ion-icon>
                  Regresar
                </ion-button>
              </ion-col> -->
              <ion-col>
                <ion-button type="submit"
                            fill="outline"
                            color="success"
                            shape="round"
                            (click)="modificarSinFoto()">
                            <ion-icon name="sync-outline"></ion-icon>
                    Actualizar
                </ion-button>  
              </ion-col>
            </ion-row>

            
            </form>
      </ion-grid>  
    </ion-slide>


    <!-- --------------------------------------SLIDE ACTUALIZAR HORARIO------------------------------------ -->
    <ion-slide>
      <ion-grid fixed>
            <form>
 
                <ion-row>
                  <ion-col>
                    <ion-list>
                        <h4 class="ion-text-wrap">Indica el horario en que tus clientes podrán reservar</h4>

                      <ion-item class="bort">
                        <ion-label>Hora Inicio</ion-label>
                        <ion-datetime displayFormat="HH:mm" 
                                      minuteValues="0"
                                    name="horaInicio"
                                    [(ngModel)]="complejo.horaInicio"
                                    (ngModelChange)='verificar()'>
                        </ion-datetime>
                      </ion-item>
                      <ion-item class="bort">
                        <ion-label>Hora Cierre</ion-label>
                        <ion-datetime displayFormat="HH:mm" 
                                      minuteValues="0"
                                    name="horaCierre"
                                    [(ngModel)]="complejo.horaCierre"
                                    (ngModelChange)='verificar()'>
                        </ion-datetime>

                      </ion-item>   
                    </ion-list>
                  </ion-col>
                </ion-row>

                <ion-row>
                  <!-- <ion-col>
                    <ion-button type="submit"
                                fill="outline"
                                color="success"
                                shape="round"
                                (click)="goSlide1()">
                        <ion-icon name="caret-back-outline"></ion-icon>
                      Regresar
                    </ion-button>
                  </ion-col> -->
                  <ion-col>
                    <ion-button *ngIf="ver"
                                type="submit"
                                fill="outline"
                                color="success"
                                shape="round"
                                (click)="modificarSinFoto()">
                                <ion-icon name="sync-outline"></ion-icon>
                        Actualizar
                    </ion-button>  
                  </ion-col>
                </ion-row>

            
            </form>
      </ion-grid>  
    </ion-slide>


<!-- ------------------------------------SLIDE ACTUALIZAR FOTO--------------------------------------------- -->
    <ion-slide>
      <ion-grid>
            <form #formulario="ngForm">

              <ion-row>
                <ion-col>
                    <h4>Imagen Actual</h4>
                  <ion-card class="ion-text-center">
                      <img src="{{complejo.foto}}" alt="200" width="500" class="bort">
                  </ion-card>                  
                </ion-col>
              </ion-row>
 
                <ion-row>
                  <ion-col>
                    <div>
                      <h4>Cambia la imagen</h4>                        
                      <ion-item>
                          <input type="file"
                                 id="img"
                                 name="img"
                                 ngModel
                                 required>
                      </ion-item>
                    </div>
                  </ion-col>
                </ion-row>

                <ion-row>
                  <!-- <ion-col>
                    <ion-button fill="outline"
                                type="submit"
                                color="success"
                                shape="round"
                                (click)="goSlide1()">
                        <ion-icon name="caret-back-outline"></ion-icon>
                      Regresar
                    </ion-button>
                  </ion-col> -->
                  <ion-col>
                    <ion-button fill="outline"
                                type="submit"
                                color="success"
                                shape="round"
                                [disabled]="formulario.invalid"
                                (click)="modificarComplejo()">
                                <ion-icon name="sync-outline"></ion-icon>
                        Actualizar
                    </ion-button>  
                  </ion-col>
                </ion-row>

            
            </form>
      </ion-grid>  
    </ion-slide>


    <!-- ------------------------------SLIDE ACTUALIZAR NUMERO-------------------------------------------- -->
    <ion-slide>
      <!--  -->
      <ion-grid>
        <form #formulario3="ngForm">
 
          <ion-row class="ion-text-center">
            <ion-col class="ion-text-center">
              <h4>Actualiza tu número de teléfono</h4>
              <ion-item>
                <ion-input type="text"
                            class="izquierda"                         
                           name="complejoTelefono"
                            minlength="8" maxlength="8"
                            pattern="[0-9]+"
                           [(ngModel)]="complejo.numero"
                           required>
                          </ion-input>
              </ion-item>
            </ion-col>
          </ion-row>

          <ion-row>
            <!-- <ion-col>
              <ion-button type="submit"
                          fill="outline"
                          color="success"
                          shape="round"
                          (click)="goSlide1()">
                          <ion-icon name="caret-back-outline"></ion-icon>
                Regresar
              </ion-button>
            </ion-col> -->
            <ion-col>
              <ion-button type="submit"
                          fill="outline"
                          color="success"
                          shape="round"
                          (click)="modificarSinFoto()"
                          [disabled]="formulario3.invalid">
                          <ion-icon name="sync-outline"></ion-icon>
                  Actualizar                        
              </ion-button>  
            </ion-col>
          </ion-row>

      
      </form>
      </ion-grid>
  
      </ion-slide>
  
  
  <!-- -------------------------------SLIDE VER CANCHAS------------------------------------- -->

  <ion-slide>
  
    <!--  -->
  </ion-slide>


     
  
  
  
  </ion-slides>


</ion-content>
